"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[306],{4844:(e,t,n)=>{n.d(t,{b8:()=>a});const a={IotGateway:"iot-gateway",Classroom:"classroom",OrgAdmin:"org-admin",FastBuilds:"fast-builds",UploadLibraries:"upload-libraries",UploadSdCard:"upload-sd-card",Unlisted:"unlisted",VSCode:"vscode",VSCodeOffline:"vscode-offline"}},9296:(e,t,n)=>{function a(e){return Math.round(100*e)/100}function r(e,t){return Math.floor(e/t)*t}function o(e,t){return Math.ceil(e/t)*t}n.d(t,{Hg:()=>r,Xo:()=>a,yd:()=>o})},9596:(e,t,n)=>{n.d(t,{h:()=>r,z:()=>o});var a=n(98779);function r(){return n.e(4349).then(n.bind(n,24349))}async function o(e){const{downloadZip:t}=await r(),n=new Date,o=[{name:"wokwi-project.txt",date:n,input:[`Downloaded from ${e.url??location.href}`,"","Simulate this project on https://wokwi.com",""].join("\r\n")},...e.files.map((t=>({name:t.name,date:t.modified?n:e.updated??n,input:t.content})))],i=await t(o).blob(),s=e.name.replace(/[/<>:"\\|?*]/g,"_").replace(/(\.[^.]+)?$/,".zip");(0,a.AE)(URL.createObjectURL(i),s.length>4?s:"project.zip")}},28859:(e,t,n)=>{n.d(t,{H:()=>s,G:()=>i});var a=n(74008);const r=!n(33902).K;function o(){const e=new URL(location.href);return/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(e.hostname)||"file:"===e.protocol}async function i(e,t={}){if(r||o()){const n="color: initial; font-weight: initial";return void console.log("[analytics:%cevent%c] %c%s%c "+Object.keys(t).map((()=>"%c%s%c=%s")).join(", "),"color: blue; font-weight: bold",n,"color: green; font-weight: bold",e,n,...Object.entries(t??{}).flatMap((([e,t])=>["color: purple; font-weight: bold",e,n,t])))}const n={e,p:t};await fetch("/api/ev",{method:"POST",headers:{"Content-Type":"application/json",...a.Zz.token?{Authorization:`Bearer ${a.Zz.token}`}:{}},body:JSON.stringify(n)})}function s({action:e,category:t,label:n,value:a},i=!1){if(r||o()){const r="color: initial; font-weight: initial";console.log("[analytics:%c%s%c] %c%s%c (%c%s%c)","color: blue; font-weight: bold",t,r,"color: green; font-weight: bold",e,r,"color: purple; font-weight: bold",n??a,r)}else{var s;if("undefined"!=typeof gtag)gtag("event",e,(s={event_category:t,event_label:n,value:a,...i?{transport_type:"beacon"}:{}},JSON.parse(JSON.stringify(s))));else console.log("Adblocker detected")}}},33902:(e,t,n)=>{n.d(t,{K:()=>r,v:()=>o});var a=n(41463);const r=!0;function o(){return"undefined"!=typeof location?`${location.protocol}//${location.host}`:a.env.VERCEL_URL?`https://${a.env.VERCEL_URL}`:r?"https://wokwi.com":"http://localhost:3002"}},60468:(e,t,n)=>{n.d(t,{yF:()=>y,w:()=>h});var a=n(84086),r=n(9296),o=n(88074),i=n(51989),s=n(94949);const c=173*s.AO,d=55*s.AO;var m=n(75046),l=n(81172);class g{diagram;undoStack=[];redoStack=[];recorder;inGroup=!1;groupIndex=0;get canUndo(){return this.undoStack.length>0}get canRedo(){return this.redoStack.length>0}constructor(e){this.diagram=e,(0,o.l_)(this,{recorder:!1,undoStack:o.sH.shallow,redoStack:o.sH.shallow}),this.recorder=(0,i.Ey)(e,((e,t,n)=>{const a=this.undoStack[this.undoStack.length-1],r=this.inGroup?`group-${this.groupIndex}`:n?.id;return n&&a&&a.id===r?(a.patches.push(e),a.inverse.unshift(t),!0):(this.undoStack.push({id:r,patches:[e],inverse:[t]}),this.redoStack=[],!0)}))}undo(){const e=this.undoStack.pop();e&&this.diagram&&(this.recorder?.stop(),(0,i.X6)(this.diagram,e.inverse),this.recorder?.resume(),this.redoStack.push(e))}redo(){const e=this.redoStack.pop();e&&this.diagram&&(this.recorder?.stop(),(0,i.X6)(this.diagram,e.patches),this.recorder?.resume(),this.undoStack.push(e))}combineWithPrevious(){const e=this.undoStack.pop(),t=this.undoStack[this.undoStack.length-1];e&&t?(t.patches.push(...e.patches),t.inverse.unshift(...e.inverse)):e&&this.undoStack.push(e)}startGroup(){this.inGroup?console.warn("startGroup() called while already in undo group"):(this.inGroup=!0,this.groupIndex++)}endGroup(){this.inGroup||console.warn("endGroup() called while not in undo group"),this.inGroup=!1}reset(){this.undoStack=[],this.redoStack=[]}withoutUndo(e){this.recorder.stop(),e(),this.recorder.resume()}}const p=i.gK.model({fromPart:i.gK.string,fromPin:i.gK.string,toPart:i.gK.string,toPin:i.gK.string,color:i.gK.string,hints:i.gK.optional(i.gK.array(i.gK.string),[])}).volatile((()=>({dragHints:null}))).views((e=>({get name(){return`${e.fromPart}:${e.fromPin}â†”${e.toPart}:${e.toPin}`},get isBreadboardConnection(){return""===e.color&&1===e.hints.length&&"$bb"===e.hints[0]}}))).actions((e=>({setColor(t,n=!0){const a=(0,i.k2)(e,y);if(!n||!a)return void(e.color=t);a.undoManager.startGroup(),e.color=t;const r=[e],o=new Set;for(;r.length>0;){const e=r.shift();if(o.has(e))continue;o.add(e);const n=a.parts.filter((t=>t.isJunction&&(t.id===e.fromPart||t.id===e.toPart))).map((e=>e.id)),i=a.connections.filter((e=>n.includes(e.fromPart)||n.includes(e.toPart)));for(const e of i)e.setColor(t,!1),r.push(e)}a.undoManager.endGroup()},moveSegment(t,n,a,o){let i=(o=JSON.parse(JSON.stringify(o)))[t-1];const s=o[t];let c=o[t+1];i||(i={x1:s.x1,x2:s.x1,y1:s.y1,y2:s.y1},o.unshift(i)),c||(c={...s},o.push(c)),n?(i.x1===s.x1?i.x1=(0,r.Xo)(i.x1+a):i.x2===s.x2&&(i.x2=(0,r.Xo)(i.x2+a)),c.x1===s.x1?c.x1=(0,r.Xo)(c.x1+a):c.x2===s.x2&&(c.x2=(0,r.Xo)(c.x2+a)),s.x1=(0,r.Xo)(s.x1+a),s.x2=(0,r.Xo)(s.x2+a)):(i.y1===s.y1?i.y1=(0,r.Xo)(i.y1+a):i.y2===s.y2&&(i.y2=(0,r.Xo)(i.y2+a)),c.y1===s.y1?c.y1=(0,r.Xo)(c.y1+a):c.y2===s.y2&&(c.y2=(0,r.Xo)(c.y2+a)),s.y1=(0,r.Xo)(s.y1+a),s.y2=(0,r.Xo)(s.y2+a)),o.pop(),e.dragHints=o.map((e=>e.x1===e.x2?`v${(0,r.Xo)(e.y2-e.y1)}`:`h${(0,r.Xo)(e.x2-e.x1)}`))},commitDrag(){e.dragHints&&(e.hints.replace(e.dragHints),e.dragHints=null)}}))),h=i.gK.snapshotProcessor(p,{preProcessor(e){const[t,n,a,r]=e,[o,i]=t.split(":"),[s,c]=n.split(":");return{fromPart:o,fromPin:i,toPart:s,toPin:c,color:a,hints:r}},postProcessor(e){if(e instanceof Array)return e;const{fromPart:t,fromPin:n,toPart:a,toPin:r,color:o,hints:i}=e;return[`${t}:${n}`,`${a}:${r}`,o,i]}});const u=i.gK.snapshotProcessor(i.gK.map(i.gK.string),{preProcessor(e){const t={};for(const n of Object.keys(e)){const a=e[n];Array.isArray(a)?t[n]=JSON.stringify(a):t[n]=a}return t},postProcessor(e){const t={};for(const n of Object.keys(e)){const a=e[n];t[n]="keys"===n?(0,l.X)(a)??a:a}return t}}),f=i.gK.model({type:i.gK.string,id:i.gK.string,top:i.gK.optional(i.gK.number,0),left:i.gK.optional(i.gK.number,0),rotate:i.gK.optional(i.gK.number,0),hide:i.gK.optional(i.gK.boolean,!1),attrs:i.gK.optional(u,{})}).volatile((()=>({floatVars:o.sH.map(),pinInfo:[],needsSnap:!1,color:""}))).views((e=>({get isJunction(){return"wokwi-junction"===e.type},get isBreadboard(){return e.type.startsWith("wokwi-breadboard")},get isOnBreadboard(){const t=(0,i.k2)(e,y);for(const n of t.breadboards)for(const t of e.pinInfo)if(t.x+e.left>n.left&&t.x+e.left<n.left+c&&t.y+e.top>n.top&&t.y+e.top<n.top+d)return!0;return!1},pinAttachedToBreadboard:(t,n)=>0!==t.breadboards.length&&t.connections.some((t=>t.isBreadboardConnection&&(t.fromPart===e.id&&t.fromPin===n||t.toPart===e.id&&t.toPin===n))),get attachedParts(){if(!this.isBreadboard)return[];const t=(0,i.k2)(e,y),n=t.connections.filter((t=>(t.fromPart===e.id||t.toPart===e.id)&&t.isBreadboardConnection)),a=new Set([...n.map((e=>e.fromPart)),...n.map((e=>e.toPart))]),r=[];for(const n of a){const a=t.parts.find((e=>e.id===n));a&&n!==e.id&&r.push(a)}return r},get dependencyString(){return(0,i.k2)(e,y).dependencies.get(e.type)}}))).actions((e=>({setAttr(t,n){e.attrs.set(t,n)},deleteAttr(t){e.attrs.delete(t)},setFloatVar(t,n){e.floatVars.set(t,n)},moveTo(t,n){e.left=Math.round(100*t)/100,e.top=Math.round(100*n)/100},rotateBy(t){e.rotate=(e.rotate+t+360)%360},snap(){e.needsSnap=!0},updatePinInfo(t){if(e.pinInfo=t,e.needsSnap){e.needsSnap=!1;const n=t[0];if(n){const t=n.x,o=n.y,c=(0,a.zZ)(e.left+t,s.jt),d=(0,a.zZ)(e.top+o,s.jt);e.left=(0,r.Xo)(c-t),e.top=(0,r.Xo)(d-o);(0,i.k2)(e,y).undoManager.combineWithPrevious()}}this.updateBreadboardConnections()},updateBreadboardConnections(){const t=(0,i.k2)(e,y),{left:n,top:a}=e;if(!e.isBreadboard){t.removeBreadboardConnections(e.id);for(const r of t.breadboards)for(const o of e.pinInfo)for(const i of r.pinInfo)Math.abs(o.x+n-(r.left+i.x))<2&&Math.abs(o.y+a-(r.top+i.y))<2&&!o.noBreadboard&&t.connectPin(e.id,o.name,r.id,i.name,"",["$bb"])}},setJunctionColor(t){e.color=t}}))).views((e=>({readFloatVar(t,n){if(!e.floatVars.has(t)){const a=parseFloat(e.attrs.get(t)??"");isNaN(a)||(n=a),e.setFloatVar(t,n)}return e.floatVars.get(t)??n},get chipJsonName(){return e.type.substring(5)+".chip.json"}}))),P=i.gK.model({collapse:i.gK.maybe(i.gK.boolean),convertEol:i.gK.maybe(i.gK.boolean),display:i.gK.maybe(i.gK.enumeration(["never","always","auto","plotter","terminal"])),newline:i.gK.maybe(i.gK.enumeration(["none","cr","lf","crlf"]))}),y=i.gK.model({version:i.gK.optional(i.gK.literal(1),1),customView:i.gK.maybe(i.gK.string),author:i.gK.maybe(i.gK.string),editor:i.gK.optional(i.gK.string,"wokwi"),pacman:i.gK.maybe(i.gK.boolean),parts:i.gK.array(f),connections:i.gK.array(h),serialMonitor:i.gK.maybe(P),dependencies:i.gK.map(i.gK.string)}).volatile((e=>({undoManager:new g(e)}))).views((e=>({get breadboards(){return e.parts.filter((e=>e.isBreadboard))},findConnection(t,n){for(const a of e.connections)if(a.fromPart===t&&a.fromPin===n||a.toPart===t&&a.toPin===n)return a;return null},findMCU:()=>e.parts.find((e=>m.MF.includes(e.type))),get serialLineEnding(){switch(e.serialMonitor?.newline){case"none":return"";case"cr":return"\r";case"crlf":return"\r\n";default:return"\n"}},visibleConnections:()=>e.connections.filter((e=>""!==e.color))}))).views((e=>({get board(){const t=e.findMCU()?.type;return t&&t in m.kD?m.kD[t]:null},get ercEnabled(){return e.parts.find((e=>e.type.startsWith("wokwi-gate-")||e.type.startsWith("wokwi-flip-flop-")||e.type.startsWith("wokwi-mux-")||"wokwi-gnd"===e.type||"wokwi-vcc"===e.type))}}))).actions((e=>({addPart(t){if(t.isBreadboard){let n=-1;for(let t=0;t<e.parts.length;t++)e.parts[t].isBreadboard&&(n=t);e.parts.splice(n+1,0,t)}else e.parts.push(t)},duplicatePart(t,n=!0){const a=t.id.replace(/\d+$/,"");let r=1;for(;e.parts.find((e=>e.id===a+r));)r++;const o=a+r,c=f.create({...(0,i.dV)(t),id:o,left:t.left+(n?s.jt:0),top:t.top+(n?s.jt:0)});return this.addPart(c),c},pasteParts(t,n,a=!0,r){e.undoManager.startGroup();const i=t.map((e=>this.duplicatePart(e,a)));if(r){let t=Math.min(...i.map((e=>e.left))),n=Math.min(...i.map((e=>e.top)));for(;e.parts.some((e=>Math.round(e.left)===Math.round(t)&&Math.round(e.top)===Math.round(n)&&!i.includes(e)));){t+=s.jt,n+=s.jt;for(const e of i)e.moveTo(e.left+s.jt,e.top+s.jt)}if(t<r.left||n<r.top){const e=r.left-t,a=r.top-n;for(const t of i)t.moveTo(t.left+e,t.top+a)}}for(const e of n.connections){const n=t.findIndex((t=>t.id===e.fromPart)),a=t.findIndex((t=>t.id===e.toPart));n>=0&&a>=0&&this.connectPin(i[n].id,e.fromPin,i[a].id,e.toPin,e.color,(0,o.HO)(e.hints))}for(const a of n.dependencies.keys())t.find((e=>e.type===a))&&!e.dependencies.has(a)&&e.dependencies.set(a,n.dependencies.get(a));return e.undoManager.endGroup(),i},addPartFromTemplate(t,n){const{prefix:a}=t;let r=1;for(;e.parts.find((e=>e.id===a+r));)r++;const o=t.prefix+r,i={};for(const{name:e,defaultValue:n}of t.attrs)n&&(i[e]=n);const s=Math.min(...e.parts.map((e=>e.left))),c=Math.min(...e.parts.map((e=>e.top))),d=n?.x??s,m=n?.y??c,l=f.create({type:t.type,id:o,attrs:i,left:isFinite(d)?d:0,top:isFinite(m)?m:0});return l.snap(),this.addPart(l),l},connectPin(t,n,a,r,o="green",i=[]){e.connections.find((e=>e.fromPart===t&&e.fromPin===n&&e.toPart===a&&e.toPin===r||e.fromPart===a&&e.fromPin===r&&e.toPart===t&&e.toPin===n))||e.connections.push(function({fromPart:e,fromPin:t,toPart:n,toPin:a,color:r,hints:o=[]}){return h.create([`${e}:${t}`,`${n}:${a}`,r,o])}({fromPart:t,fromPin:n,toPart:a,toPin:r,color:o,hints:i}))},deleteConnection(t){e.connections.remove(t)},removeBreadboardConnections(t){e.connections.replace(e.connections.filter((e=>!(e.fromPart===t||e.toPart===t)||!e.isBreadboardConnection)))},deletePart(t){const n=t.id;e.parts.remove(t),e.connections.replace(e.connections.filter((e=>e.fromPart!==n&&e.toPart!==n)))},setAuthor(t){e.author=t}})))},60978:(e,t,n)=>{n.d(t,{$A:()=>r,Vn:()=>s,c8:()=>i,jF:()=>o,mx:()=>a});n(60468);const a="libraries.txt";function r(e){const t=e.toLowerCase();return"readme.md"===t?"readme":"diagram.json"===e?"diagram":e===a?"libraries":t.endsWith(".ino")?"sketch":t.endsWith(".h")||t.endsWith(".hh")||t.endsWith(".hpp")?"header":t.endsWith(".chip.c")||t.endsWith(".chip.v")||t.endsWith(".chip.rs")?"chip":t.endsWith(".c")||t.endsWith(".cpp")||t.endsWith(".s")||t.endsWith(".v")||t.endsWith(".rs")||t.endsWith(".ts")?"source":"other"}function o(e){if(e)return"string"==typeof e.content?e.content:(new TextDecoder).decode(e.content)}function i(e){const t=e.toLowerCase();return t.endsWith(".ino")||t.endsWith(".h")||t.endsWith(".hh")||t.endsWith(".hpp")||t.endsWith(".c")||t.endsWith(".cpp")}function s(e){return`https://wokwi.com/projects/${e}`}},74008:(e,t,n)=>{n.d(t,{Rs:()=>k,Zz:()=>I});var a=n(80052),r=n(4844),o=n(56907),i=n(88074),s=n(12115),c=n(28859),d=n(33902),m=n(29515),l=n(41463);const g=(0,m.Dk)()?.[0]??(0,m.Wp)({apiKey:"AIzaSyDeSOFTk-xhmymi82SYFffgcxVOqRKh-Os",authDomain:"auth.wokwi.com",databaseURL:"https://wokwi-app.firebaseio.com",projectId:l.env.FIREBASE_PROJECT,storageBucket:"wokwi-app.appspot.com",messagingSenderId:"706751742332",appId:"1:706751742332:web:dabe8cfaea27a25674a4f9",measurementId:"G-N6XV5D2YRD"});var p=n(99253),h=n(86965);const u="wokwiUser",f="_wokwiSigninEmail",P="wokwiLangId",y="_wokwiAff";function w(e){try{e?localStorage.setItem(f,e):localStorage.removeItem(f)}catch(e){}}function b(){try{return localStorage.getItem(y)??void 0}catch(e){return void console.warn(e)}}const I=new class{_token;get token(){return this._token}_username;get username(){return this._username}_displayName;get displayName(){return this._displayName}_email;get email(){return this._email}_profileImage;get profileImage(){return this._profileImage}_hasSubscriptions=!1;get hasSubscriptions(){return this._hasSubscriptions}_plans=[];get plans(){return this._plans}_organization;get organization(){return this._organization}_orgId;get orgId(){return this._orgId}_caps=[];get caps(){return this._caps}_votePowers=0;get votePowers(){return this._votePowers}_langId="";get langId(){return this._langId}_paddleId;get paddleId(){return this._paddleId}_signinProviders=[];get signinProviders(){return this._signinProviders}firebaseAuth=(0,o.xI)(g);firebaseSigninInProgress=!1;constructor(){(0,i.l_)(this),setTimeout((()=>{try{if("undefined"==typeof localStorage)return;this.loadUserInfo(),window.addEventListener("storage",this.loadUserInfo)}catch(e){console.error(e)}}),0),(0,o.hg)(this.firebaseAuth,(e=>{this.updateProviders(e?.providerData??[])}))}get loggedIn(){return!!this.email}get firstName(){return this.displayName?.split(" ")[0]}get id(){const e=this.token?.split(".");if(e)return JSON.parse(atob(e[1])).sub}get paddleCustomer(){return this.paddleId?{id:this.paddleId}:this.email?{email:this.email}:void 0}hasPlan(e){return this.plans.some((t=>t.id===e.id))}get isOrgAdmin(){return this.caps.includes(r.b8.OrgAdmin)}get hasClassroomPlan(){return this.caps.includes(r.b8.Classroom)}get isClassroomAdmin(){return this.isOrgAdmin&&this.hasClassroomPlan}get isProOrgAdmin(){return this.isOrgAdmin&&!this.hasClassroomPlan&&this.hasPlan(a.nQ.Pro)}bestPlan(){for(const e of[a.nQ.Pro,a.nQ.HobbyPlus,a.nQ.Hobby,a.nQ.Club])if(this.hasPlan(e))return e;return null}updateProviders(e){const t=[];for(const n of e)"google.com"===n.providerId?t.push("google"):"github.com"===n.providerId&&t.push("github");this._signinProviders=t}async unlinkProvider(e){const t=this.firebaseAuth.currentUser;if(!t)return;const n="google"===e?o.HF.PROVIDER_ID:o.Dt.PROVIDER_ID,a=await(0,o.y1)(t,n);await this.userSignedIn(a)}async linkProvider(e){const t=this.firebaseAuth.currentUser;if(!t)throw new Error("User not logged in when linking provider");const n=await(0,o.x8)(t,"google"===e?new o.HF:new o.Dt);n&&this.userSignedIn(n.user)}logout(){this._token=void 0,this._profileImage="",this._email="",this._displayName="",this.firebaseSigninInProgress||(this.firebaseAuth.signOut(),fetch("/api/logout"));try{localStorage.removeItem(u)}catch(e){console.error(e)}}setLangId(e){this._langId=e;try{localStorage.setItem(P,e)}catch(e){}}setUserInfo(e){const{email:t,name:n,picture:a}=e;this._email=t??"",this._displayName=n??"",this._profileImage=a??""}loadUserInfo=async()=>{this.setLangId(localStorage.getItem(P)??"");const e=localStorage.getItem(u)?.split(" "),t=e?.[0],n=e?.[1];if(t?this.setToken(t,!1):this.logout(),n&&this.setUserInfo(h.ED.parse(n)),t&&this.loggedIn){const e=await(0,p.WJ)({token:t});this.updateFromServer(e)}};setToken(e,t=!0){if(this._token=e,t){const t=[e],{email:n,displayName:a,profileImage:r}=this;if(n){const e={email:n,name:a??"",picture:r};t.push(h.ED.stringify(e))}try{localStorage.setItem(u,t.join(" "))}catch(e){console.error(e)}}}updateFromServer(e){this._votePowers=e.votePowers,this._hasSubscriptions=e.hasSubscriptions,this._organization=e.organization,this._orgId=e.orgId,this._caps=e.caps,this._username=e.username??void 0,this._paddleId=e.paddleId,this._plans=e.plans}updateVotePowers(e){this._votePowers=e}setOrganization(e){this._organization=e}storeAffiliateCode(e){if(!this.loggedIn)try{localStorage.setItem(y,e)}catch(e){console.error(e)}}setUsername(e){this._username=e}async userSignedIn(e){this.updateProviders(e.providerData);const t=await(e?.getIdToken());if(t){const{userToken:n}=await(0,p.Pm)(this,t,{affiliateCode:b()}),a={name:e.displayName??"",email:e.email??"",picture:e.photoURL??void 0};this.setUserInfo(a),this.setToken(n),function(){try{localStorage.removeItem(y)}catch(e){console.warn(e)}}()}}async signIn(e){const t="google"===e?new o.HF:new o.Dt;try{this.firebaseSigninInProgress=!0;const{user:e}=await(0,o.df)(this.firebaseAuth,t);e&&this.userSignedIn(e)}catch(e){const t=e?.code??void 0;if("auth/popup-closed-by-user"===t||"auth/cancelled-popup-request"===t)return;if((0,c.G)("login:error",{errorCode:t}),"auth/account-exists-with-different-credential"===t){const t=e.customData?.email;setTimeout((()=>alert(`Your email address (${t}) is already registered with a different sign-in method. Please contact support@wokwi.com for assistance.`)),0)}else{const n=t??e.message?.replace(/.$/,"");setTimeout((()=>alert(`Sign in failed: ${n}. Please go to https://wokwi.com/status and contact support@wokwi.com with the results.`)),0)}}finally{this.firebaseSigninInProgress=!1}}async signInWithEmail(e){w(e),await(0,o.MN)(this.firebaseAuth,e,{url:`${(0,d.v)()}/email-signin`,handleCodeInApp:!0})}async completeEmailSignIn(e=function(){try{return localStorage.getItem(f)}catch(e){return""}}()){if(!e)return!1;try{this.firebaseSigninInProgress=!0;const{user:t}=await(0,o.hK)(this.firebaseAuth,e,window.location.href);return t&&(this.userSignedIn(t),w(null)),!0}catch(e){return console.error(e),!1}finally{this.firebaseSigninInProgress=!1}}async signInWithToken(e,t){this._email=e,this.setToken(t);const n=await(0,p.WJ)({token:this.token});this.updateFromServer(n)}async refresh(){if(this.token&&this.loggedIn){const e=await(0,p.WJ)({token:this.token});this.updateFromServer(e)}}},k=(0,s.createContext)(I)},74370:(e,t,n)=>{async function a({directory:e,multiple:t,accept:n}={}){const a=document.createElement("input");return a.type="file",a.multiple=t??!1,n&&(a.accept=n.join(",")),e&&(a.multiple=!0,a.webkitdirectory=!0),new Promise(((e,t)=>{document.body.appendChild(a),a.remove(),a.click(),a.onchange=async()=>{a.files?e({files:a.files}):t(new Error("No files selected"))}}))}function r(e,t=!0){return e.webkitRelativePath?t?e.webkitRelativePath.replace(/^[^/]+\//,""):e.webkitRelativePath:e.name}async function o(e){if("arrayBuffer"in e)return e.arrayBuffer();const t=new FileReader;return new Promise(((n,a)=>{t.onerror=a,t.onloadend=()=>{null==t.result&&a(),n(t.result)},t.readAsArrayBuffer(e)}))}async function i(e){if("text"in e)return e.text();const t=new FileReader;return new Promise(((n,a)=>{t.onerror=a,t.onloadend=()=>{null==t.result&&a(),n(t.result)},t.readAsText(e)}))}n.d(t,{Gu:()=>i,Km:()=>a,_N:()=>o,oK:()=>r})},75046:(e,t,n)=>{n.d(t,{MF:()=>c,SW:()=>r,kD:()=>s,lx:()=>d});var a=n(88074);const r={type:"power",voltage:0},o=e=>({type:"power",voltage:e}),i=[{name:"GND",target:r},{name:"5V",target:o(5)},{name:"VIN",target:o(5)},{name:"3.3V",target:o(3.3)},{name:"RESET",target:"RESET"},{name:"0",target:"PD0"},{name:"1",target:"PD1"},{name:"2",target:"PD2"},{name:"3",target:"PD3"},{name:"4",target:"PD4"},{name:"5",target:"PD5"},{name:"6",target:"PD6"},{name:"7",target:"PD7"},{name:"8",target:"PB0"},{name:"9",target:"PB1"},{name:"10",target:"PB2"},{name:"11",target:"PB3"},{name:"12",target:"PB4"},{name:"13",target:"PB5"},{name:"A0",target:"PC0"},{name:"A1",target:"PC1"},{name:"A2",target:"PC2"},{name:"A3",target:"PC3"},{name:"A4",target:"PC4"},{name:"A5",target:"PC5"}],s={"wokwi-arduino-uno":{name:"Arduino Uno",mcuType:"atmega328p",hexiBoard:"uno",environments:{},pins:i},"wokwi-arduino-mega":{name:"Arduino Mega 2560",mcuType:"atmega2560",hexiBoard:"mega",environments:{},pins:[{name:"GND",target:r},{name:"5V",target:o(5)},{name:"VIN",target:o(5)},{name:"3.3V",target:o(3.3)},{name:"RESET",target:"RESET"},{name:"0",target:"PE0"},{name:"1",target:"PE1"},{name:"2",target:"PE4"},{name:"3",target:"PE5"},{name:"4",target:"PG5"},{name:"5",target:"PE3"},{name:"6",target:"PH3"},{name:"7",target:"PH4"},{name:"8",target:"PH5"},{name:"9",target:"PH6"},{name:"10",target:"PB4"},{name:"11",target:"PB5"},{name:"12",target:"PB6"},{name:"13",target:"PB7"},{name:"14",target:"PJ1"},{name:"15",target:"PJ0"},{name:"16",target:"PH1"},{name:"17",target:"PH0"},{name:"18",target:"PD3"},{name:"19",target:"PD2"},{name:"20",target:"PD1"},{name:"21",target:"PD0"},{name:"22",target:"PA0"},{name:"23",target:"PA1"},{name:"24",target:"PA2"},{name:"25",target:"PA3"},{name:"26",target:"PA4"},{name:"27",target:"PA5"},{name:"28",target:"PA6"},{name:"29",target:"PA7"},{name:"30",target:"PC7"},{name:"31",target:"PC6"},{name:"32",target:"PC5"},{name:"33",target:"PC4"},{name:"34",target:"PC3"},{name:"35",target:"PC2"},{name:"36",target:"PC1"},{name:"37",target:"PC0"},{name:"38",target:"PD7"},{name:"39",target:"PG2"},{name:"40",target:"PG1"},{name:"41",target:"PG0"},{name:"42",target:"PL7"},{name:"43",target:"PL6"},{name:"44",target:"PL5"},{name:"45",target:"PL4"},{name:"46",target:"PL3"},{name:"47",target:"PL2"},{name:"48",target:"PL1"},{name:"49",target:"PL0"},{name:"50",target:"PB3"},{name:"51",target:"PB2"},{name:"52",target:"PB1"},{name:"53",target:"PB0"},{name:"A0",target:"PF0"},{name:"A1",target:"PF1"},{name:"A2",target:"PF2"},{name:"A3",target:"PF3"},{name:"A4",target:"PF4"},{name:"A5",target:"PF5"},{name:"A6",target:"PF6"},{name:"A7",target:"PF7"},{name:"A8",target:"PK0"},{name:"A9",target:"PK1"},{name:"A10",target:"PK2"},{name:"A11",target:"PK3"},{name:"A12",target:"PK4"},{name:"A13",target:"PK5"},{name:"A14",target:"PK6"},{name:"A15",target:"PK7"},{name:"SDA",target:"PD1"},{name:"SCL",target:"PD0"}]},"wokwi-arduino-nano":{name:"Arduino Nano",mcuType:"atmega328p",hexiBoard:"nano",environments:{},pins:[...i,{name:"A6",target:"ADC6"},{name:"A7",target:"ADC7"}]},"wokwi-attiny85":{name:"ATtiny85",mcuType:"attiny85",hexiBoard:"attiny85",environments:{},pins:[{name:"PB0",target:"PB0"},{name:"PB1",target:"PB1"},{name:"PB2",target:"PB2"},{name:"PB3",target:"PB3"},{name:"PB4",target:"PB4"},{name:"PB5",target:"PB5"},{name:"RESET",target:"RESET"},{name:"GND",target:r},{name:"VCC",target:o(5)}]},"wokwi-franzininho":{name:"Franzininho",mcuType:"attiny85",hexiBoard:"attiny85",environments:{},pins:[{name:"PB0",target:"PB0"},{name:"PB1",target:"PB1"},{name:"PB2",target:"PB2"},{name:"PB3",target:"PB3"},{name:"PB4",target:"PB4"},{name:"PB5",target:"PB5"},{name:"RESET",target:"RESET"},{name:"GND",target:r},{name:"VCC",target:o(5)}]},"wokwi-pi-pico":{name:"Raspberry Pi Pico",mcuType:"rp2040",hexiBoard:"pipico",environments:{micropython:{firmware:"https://wokwi.github.io/firmware-assets/micropython/rp2-pico-$VERSION.uf2",defaultVersion:"20241129-v1.24.1",type:"binary",fs:{type:"lfs",flashOffset:655360,blockSize:4096,numBlocks:352}},circuitpython:{firmware:"https://wokwi.github.io/firmware-assets/circuitpython/adafruit-circuitpython-raspberry_pi_pico-en_US-$VERSION.uf2",defaultVersion:"7.0.0-rc.1-61-gcf5c32be3-wfi",type:"binary",fs:{type:"fat",flashOffset:1048576,blockSize:512,numBlocks:1024}}},pins:[{name:"GP0",target:"GPIO0"},{name:"GP1",target:"GPIO1"},{name:"GP2",target:"GPIO2"},{name:"GP3",target:"GPIO3"},{name:"GP4",target:"GPIO4"},{name:"GP5",target:"GPIO5"},{name:"GP6",target:"GPIO6"},{name:"GP7",target:"GPIO7"},{name:"GP8",target:"GPIO8"},{name:"GP9",target:"GPIO9"},{name:"GP10",target:"GPIO10"},{name:"GP11",target:"GPIO11"},{name:"GP12",target:"GPIO12"},{name:"GP13",target:"GPIO13"},{name:"GP14",target:"GPIO14"},{name:"GP15",target:"GPIO15"},{name:"GP16",target:"GPIO16"},{name:"GP17",target:"GPIO17"},{name:"GP18",target:"GPIO18"},{name:"GP19",target:"GPIO19"},{name:"GP20",target:"GPIO20"},{name:"GP21",target:"GPIO21"},{name:"GP22",target:"GPIO22"},{name:"TP4",target:"GPIO23"},{name:"$gpio24",target:"GPIO24"},{name:"TP5",target:"GPIO25"},{name:"GP26",target:"GPIO26"},{name:"GP27",target:"GPIO27"},{name:"GP28",target:"GPIO28"},{name:"$gpio29",target:"GPIO29"},{name:"GND",target:r},{name:"VSYS",target:o(3.3)},{name:"VBUS",target:o(5)},{name:"3V3",target:o(3.3)},{name:"usb$RX",target:"usb$RX"},{name:"usb$TX",target:"usb$TX"}]},"wokwi-esp32-devkit-v1":{name:"ESP32",mcuType:"esp32",hexiBoard:"esp32:esp32:esp32doit-devkit-v1",environments:{micropython:{firmware:"https://wokwi.github.io/firmware-assets/micropython/esp32-$VERSION.bin",defaultVersion:"20231227-v1.22.0",type:"binary",fs:{type:"lfs",flashOffset:2097152,blockSize:4096,numBlocks:512}},annex32:{firmware:"https://wokwi.github.io/firmware-assets/annex32/annex32-$VERSION.bin",defaultVersion:"1.46.5",type:"binary",fs:{type:"fat",flashOffset:3149824,blockSize:4096,numBlocks:253}}},pins:[{name:"EN",target:"CHIP_PU"},{name:"VN",target:"GPIO39"},{name:"VP",target:"GPIO36"},{name:"D34",target:"GPIO34"},{name:"D35",target:"GPIO35"},{name:"D32",target:"GPIO32"},{name:"D33",target:"GPIO33"},{name:"D25",target:"GPIO25"},{name:"D26",target:"GPIO26"},{name:"D27",target:"GPIO27"},{name:"D14",target:"GPIO14"},{name:"D12",target:"GPIO12"},{name:"D13",target:"GPIO13"},{name:"GND",target:r},{name:"VIN",target:o(5)},{name:"3V3",target:o(3.3)},{name:"D15",target:"GPIO15"},{name:"D2",target:"GPIO2"},{name:"D4",target:"GPIO4"},{name:"RX2",target:"GPIO16"},{name:"TX2",target:"GPIO17"},{name:"D5",target:"GPIO5"},{name:"D18",target:"GPIO18"},{name:"D19",target:"GPIO19"},{name:"D21",target:"GPIO21"},{name:"RX0",target:"GPIO3"},{name:"TX0",target:"GPIO1"},{name:"D22",target:"GPIO22"},{name:"D23",target:"GPIO23"}]},"wokwi-tinypico":{name:"TinyPICO",mcuType:"esp32",hexiBoard:"esp32:esp32:um_tinypico",environments:{micropython:{firmware:"https://wokwi.github.io/firmware-assets/micropython/esp32-$VERSION.bin",defaultVersion:"20210618-v1.16",type:"binary",fs:{type:"lfs",flashOffset:2097152,blockSize:4096,numBlocks:512}}},pins:[{name:"25",target:"GPIO25"},{name:"26",target:"GPIO26"},{name:"27",target:"GPIO27"},{name:"15",target:"GPIO15"},{name:"14",target:"GPIO14"},{name:"4",target:"GPIO4"},{name:"3V3",target:o(3.3)},{name:"5V",target:o(5)},{name:"BAT",target:"GPIO"},{name:"23",target:"GPIO23"},{name:"19",target:"GPIO19"},{name:"18",target:"GPIO18"},{name:"5",target:"GPIO5"},{name:"22",target:"GPIO22"},{name:"21",target:"GPIO21"},{name:"32",target:"GPIO32"},{name:"33",target:"GPIO33"},{name:"RST",target:""},{name:"GND",target:r},{name:"RX0",target:"GPIO3"},{name:"TX0",target:"GPIO1"},{name:"$APA_DATA",target:"GPIO2"},{name:"$APA_CLK",target:"GPIO12"},{name:"$APA_PWR",target:"GPIO13"}]}},c=(0,a.sH)(Object.keys(s));function d(e,t){const n=s[e],a=n?.hexiBoard;return"string"==typeof a?a:"function"==typeof a?a(t):void 0}},80052:(e,t,n)=>{n.d(t,{nQ:()=>r,wc:()=>o});var a=n(91435);const r={Hobby:{id:"hobby",name:"Hobby",hierarchy:10,monthly:{dbName:"hobby-monthly",paddleId:a.m?"pri_01j24htf4n0n4wcwaw016zx6j5":"pri_01j23s62s20kz94t7s5jy5ggk4"},annual:{dbName:"hobby-annual",paddleId:a.m?"pri_01j24hs9rva4c9xn8928xydttq":"pri_01j23s71khbnma0s9dr9h5xtp6"}},HobbyPlus:{id:"hobbyplus",name:"Hobby Plus",hierarchy:20,monthly:{dbName:"hobbyplus-monthly",paddleId:a.m?"pri_01j24hwth9efkw3f0ass2n72x9":"pri_01j23s4fg8j122bcp9hdekxzjy"},annual:{dbName:"hobbyplus-annual",paddleId:a.m?"pri_01j24hw5qzny5vym6kfajv2t3k":"pri_01j23s58vrvmwsxdn74qdsdp16"}},Pro:{id:"pro",name:"Wokwi Pro",hierarchy:30,monthly:{dbName:"pro-monthly",paddleId:a.m?"pri_01j24hqm0dzz0jkvt6v1xqq5ed":"pri_01j23s280fmmt16aq090yz9te3"},annual:{dbName:"pro-annual",paddleId:a.m?"pri_01j24hpn4b6v58qq9hcnp0j7vt":"pri_01j23s2tkgawrtpvvyk6v8webp"}},Club:{id:"club",name:"Wokwi Club",hierarchy:5,monthly:{dbName:"club-monthly",paddleId:a.m?"pri_01hhdc4nvc0pagsneg2hkrywzn":"pri_01hhhtjpnybkw6s9538e0pwgg3"},annual:{dbName:"club-annual",paddleId:a.m?"pri_01hhdc5fa32d5h6x5e2xx2e8wn":"pri_01hhhtkdqp9fb8a0sb34ev28zb"}},VSCodeOffline:{id:"addon-offline",name:"VSCode Offline Addon",hierarchy:0,monthly:{dbName:"addon-offline-monthly",paddleId:a.m?"pri_01hjh5r4aadnxyqdcwqmtsegqj":"pri_01hjh5qe40hw0m7cmp8q393p4g"},annual:{dbName:"addon-offline-annual",paddleId:a.m?"pri_01hjh3z8hykwg2556ayjbq3h57":"pri_01hjh4d90qxgx1cch02xjrbxen"}}};function o(e){return Object.values(r).find((t=>t.id===e))}},81172:(e,t,n)=>{function a(e,t){try{return JSON.parse(e)}catch(e){t&&console.warn(t,e)}}n.d(t,{X:()=>a})},84086:(e,t,n)=>{n.d(t,{GL:()=>d,TT:()=>m,_j:()=>c,h8:()=>o,n$:()=>i,w7:()=>r,zZ:()=>s});var a=n(9296),r=function(e){return e[e.Millimetres=0]="Millimetres",e[e.Inches=1]="Inches",e}({});function o(e,t){return{x:(0,a.Xo)(e.x-t.x),y:(0,a.Xo)(e.y-t.y)}}function i(e,t){return{x:(0,a.Xo)(Math.round(e.x/t)*t),y:(0,a.Xo)(Math.round(e.y/t)*t)}}function s(e,t){return(0,a.Xo)(Math.round(e/t)*t)}function c(e,t){return new DOMRect(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.abs(e.x-t.x),Math.abs(e.y-t.y))}function d(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function m(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}},86965:(e,t,n)=>{n.d(t,{ED:()=>s,Gp:()=>o,iB:()=>c,u3:()=>i});var a=n(49304).Buffer;const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function o(e){return void 0!==a?Uint8Array.from(a.from(e,"base64")):Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function i(e){let t="";for(let n=0;n<e.length-2;n+=3)t+=r[e[n]>>2],t+=r[(3&e[n])<<4|e[n+1]>>4],t+=r[(15&e[n+1])<<2|e[n+2]>>6],t+=r[63&e[n+2]];return e.length%3==1&&(t+=r[e[e.length-1]>>2],t+=r[(3&e[e.length-1])<<4],t+="=="),e.length%3==2&&(t+=r[e[e.length-2]>>2],t+=r[(3&e[e.length-2])<<4|e[e.length-1]>>4],t+=r[(15&e[e.length-1])<<2],t+="="),t}const s={stringify:e=>i((new TextEncoder).encode(JSON.stringify(e))),parse:e=>JSON.parse((new TextDecoder).decode(o(e)))};function c(e){let t=e.replace(/_P/g,"+").replace(/_S/g,"/").replace(/=/g,"");return t.length%4==2&&(t+="=="),t.length%4==3&&(t+="="),t}},91435:(e,t,n)=>{n.d(t,{m:()=>a});const a=!1},94949:(e,t,n)=>{n.d(t,{AO:()=>a,jt:()=>r,sr:()=>o,wX:()=>i});const a=3.7795275591,r=2.54*a,o=r/2,i=25.4*a},98779:(e,t,n)=>{function a(e,t){const n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function r(e,t,n="application/octet-stream"){a(function(e,t){try{return URL.createObjectURL(new Blob([e],{type:t}))}catch(n){if("string"==typeof e)return console.error(n),`data:${t};base64,`+btoa(e);throw n}}(t,n),e)}n.d(t,{AE:()=>a,PE:()=>r})},99253:(e,t,n)=>{n.d(t,{AT:()=>m,wK:()=>c,PE:()=>y,$_:()=>f,Kh:()=>I,WJ:()=>w,DD:()=>b,oB:()=>p,JU:()=>g,Pm:()=>l,QM:()=>u,Us:()=>P});var a=n(51989),r=n(74370),o=(n(33902),n(60978)),i=n(9596);const s="X-Wokwi-Cache",c="sketch.lst";function d(e){return e.token?{Authorization:`Bearer ${e.token}`}:{}}async function m(e,t,n){const a=await fetch(t,{method:n?"post":"get",headers:{...n&&{"Content-Type":"application/json"},...d(e)},body:n&&JSON.stringify(n)});return await a.json()}async function l(e,t,n){return await m(e,"/api/signin",{token:t,aff:n.affiliateCode})}async function g(e,t,n){const r=(0,a.dV)(t.files).filter((e=>e.name!==c)),o=(0,a.dV)(t.serverFiles).filter((e=>e.serverId)),i=await m(e,"/api/projects/save",{files:[...o,...r],id:n?void 0:t.id,parentId:n?t.id:void 0,name:t.name||void 0,unlisted:t.unlisted});if(i.userToken&&e.setToken(i.userToken),i.error)throw new Error(`Save failed: ${i.error}`);if(!i.projectId)throw new Error("Save failed: invalid response from server");const d=new Headers;return d.append(s,"refresh"),fetch(location.href,{cache:"reload",headers:d}),i}async function p(e,t,n){const a=await m(e,"/api/projects/rename",{id:t,name:n});if(a.error)throw new Error(`Rename failed: ${a.error}`);return a}function h(e,t){const n=()=>e.abort();t?.addEventListener("abort",n);const a=()=>t?.removeEventListener("abort",n);return new Promise(((t,n)=>{const r=e=>{a(),n(e)};e.onload=()=>{a(),t(e.response)},e.onerror=r,e.onabort=r,e.ontimeout=r}))}async function u(e,t,n){const a=new FormData;a.set("file",t);const r=new XMLHttpRequest;r.responseType="json",r.upload.onprogress=n.onProgress??null,r.open("POST","https://storage.wokwi.workers.dev/put");for(const[t,n]of Object.entries(d(e)))r.setRequestHeader(t,n);r.send(a);const o=await h(r,n.abortSignal);if("string"==typeof o?.fileId)return o;throw console.error(o),new Error("Invalid response")}function f(e){return!(0,r.oK)(e).startsWith("examples/")&&(["header","source","libraries","sketch"].includes((0,o.$A)(e.name))||"library.properties"===e.name||e.name.endsWith(".txt")||e.name.endsWith("platformio.ini")||e.name.endsWith(".md"))}async function P(e,t,n){const{downloadZip:a}=await(0,i.h)();if(n.abortSignal?.aborted)return;const o=t[0]&&(0,r.oK)(t[0],!1).split("/")[0]||"library",s=o+".zip",c=[{name:"wokwi-library.txt",date:new Date,input:["Arduino Library uploaded to Wokwi","","Simulate your ESP32, STM32, Arduino, and electronics projects on https://wokwi.com",""].join("\r\n")},...t.map((e=>({name:(0,r.oK)(e,!0),date:e.lastModified,input:e})))],d=await a(c).blob();if(n.abortSignal?.aborted)return;return{libraryName:o,fileId:(await u(e,new File([d],s),n)).fileId}}async function y(e,t){const n=new XMLHttpRequest;return n.responseType="arraybuffer",n.open("GET",`https://storage.wokwi.workers.dev/get/${e}`),n.onprogress=t.onProgress??null,n.send(null),h(n,t.abortSignal)}async function w(e){return await m(e,"/api/users/me")}async function b(e,t){return await m(e,`/api/users/license?v=${t}`)}async function I(e,t){return await m(e,`/api/projects/${t}`)}}}]);